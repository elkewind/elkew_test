<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Elke Windschitl">
<meta name="dcterms.date" content="2022-12-02">
<meta name="description" content="A logistic regression example with fish">

<title>Elke Windschitl - Identifying Key Traits in Hawaiian Fish that Predict Risk of Extinction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo3.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>
    .quarto-title-block .quarto-title-banner {
      color: $mid-gray;
background: $dark-teal;
    }
    </style>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="twitter:title" content="Elke Windschitl - Identifying Key Traits in Hawaiian Fish that Predict Risk of Extinction">
<meta name="twitter:description" content="A logistic regression example with fish">
<meta name="twitter:image" content="https://elkewind.github.io/posts/2022-12-02-hawaiian-fish-analysis/dive_mask.JPG">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo3.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Elke Windschitl</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">
 <span class="menu-text">My Work</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html">
 <span class="menu-text">Resume</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/elkewind"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Elke_Windschitl"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/elke-windschitl-37a330149/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Identifying Key Traits in Hawaiian Fish that Predict Risk of Extinction</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          A logistic regression example with fish
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">MEDS</div>
                <div class="quarto-category">Statistics</div>
                <div class="quarto-category">R</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <a href="https://elkewind.github.io">Elke Windschitl</a> 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="http://ucsb-meds.github.io">
              UCSB Bren School
              </a>
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 2, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#results-discussion" id="toc-results-discussion" class="nav-link" data-scroll-target="#results-discussion">Results &amp; Discussion</a></li>
  <li><a href="#limitations-next-steps" id="toc-limitations-next-steps" class="nav-link" data-scroll-target="#limitations-next-steps">Limitations &amp; Next Steps</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Description:</p>
<p>In this post, I investigate Hawaiian fish ecological traits – such as size, endemism, and reef-association – to find their probability of being threatened as ranked by the IUCN Red List. For my full analysis, check out my <a href="https://github.com/elkewind/eds-222-final-project">github repository</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fish_pic.JPG" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">School of Hawaiian fish. Elke Windschitl 2018.</figcaption><p></p>
</figure>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Global human activity threatens many species with extinction. According to the International Union and Conservation of Nature (IUCN), “More than 41,000 species are threatened with extinction. That is still 28% of all assessed species.” [1]. Increased extinction and loss of biodiversity can have severe ecological, economic, and cultural impacts. Cardinale et al.’s deep dive into biodiversity and ecosystem services research conclude that biodiversity loss reduces ecological communities’ efficiency, stability, and productivity. Decreased productivity from ecosystem services can have a negative impact on ecosystem economics [2]. Additionally, cultures worldwide have strong ties to local flora and fauna, much of which now face extinction risk. Improving understanding of extinction risk is ecologically, economically, and culturally important.</p>
<p>Wildlife scientists have been working to understand what ecological traits of vertebrates predict threat level, and what common risk factors drive those threat level rates. Munstermann et al.&nbsp;investigate what terrestrial vertebrate functional groups are most at risk of extinction threat and find that cave dwelling amphibian, arboreal quadrupedal mammals, aerial and scavenging birds, and pedal squamates are at high risk [3]. This knowledge can help inform policies and practices with the goal to decrease threats of extinction of wildlife. However, less comprehensive research has been done to conduct similar analyses on marine species.</p>
<p>In recent years, the waters surrounding the Hawaiian Islands have been exposed to ecological changes due to mass coral bleaching events, El Niño events, and pollution. Rapidly changing marine ecosystems may pose a threat to Hawaiian fish. Fish hold significant cultural value in Hawaiʻi, and many local people rely on seafood as a major source of protein. However, approximately 72% of fish in Hawaiʻi present in FishBase have been evaluated by the IUCN and have sufficient data to be assessed. Here I run a small-scale analysis to investigate Hawaiian fish ecological traits – such as endemism, size, and reef-association – to predict a binary status on the IUCN red list and predict which unevaluated fish species in Hawaiʻi may be threatened.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fish_collage.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Various fish found in Hawaiʻi. Elke Windschitl 2018.</figcaption><p></p>
</figure>
</div>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>For my analyses I use the IUCN Red List data accessed via the <a href="https://apiv3.iucnredlist.org/">IUCN Red List API</a> [1] and package rredlist [4]. Consistent with Munstermann et al., living species listed as ‘Vulnerable’, ‘Endangered’, or ‘Critically Endangered’ were categorized as ‘Threatened’. Living species listed as ‘Least Concern’ and ‘Near Threatened’ were categorized as ‘Nonthreatened’ [3]. Extinct species were not evaluated in this analysis. The IUCN Red List data are limited in that many marine species have not been listed yet or have been identified as too data deficient to be evaluated. The lack of data on elusive fish may introduce bias into the model.</p>
<p>Fish ecological data were accessed from <a href="https://fishbase.net.br/search.php">FishBase</a> [5] via package rfishbase [6]. Different species in the FishBase data were originally described by different people, possibly leading to errors or biases. Measurement errors in length may be present, as there are various common ways to measure the length of a fish. The species recorded in FishBase may be biased towards fish with commercial value. Data were wrangled in R and formatted in a tidy data table (Table 1.)</p>
<div class="cell">

</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">tab_df</span>(tidy_fish_data[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,],</span>
<span id="cb1-2"><a href="#cb1-2"></a>       <span class="at">title =</span> <span class="st">"Tbl 1. Hawaii Fish Data"</span>,</span>
<span id="cb1-3"><a href="#cb1-3"></a>       <span class="at">col.header =</span> <span class="fu">c</span>(<span class="st">"Genus species"</span>, <span class="st">"Length (cm)"</span>, <span class="st">"IUCN Category"</span>, </span>
<span id="cb1-4"><a href="#cb1-4"></a>                          <span class="st">"Common Name"</span>, <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>,</span>
<span id="cb1-5"><a href="#cb1-5"></a>                          <span class="st">"Threatened"</span>, <span class="st">"Threatened Binary"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 1. Hawaii Fish Data</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">Genus species</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Length (cm)</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">IUCN Category</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Common Name</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Reef Association</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Endemic</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; col7">Threatened</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; col8">Threatened Binary</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Oreochromis mossambicus</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">39.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">VU</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Mozambique Tilapia</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">yes</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col8">1</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Coryphaena hippurus</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">210.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">LC</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Common Dolphinfish</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">yes</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col8">0</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Coryphaena equiselis</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">145.70</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">LC</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Pompano Dolphinfish</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col8">0</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Alectis indica</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">165.00</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">LC</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Indian Threadfish</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">yes</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col8">0</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">Argyropelecus affinis</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">8.40</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">LC</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">Pacific Hatchet Fish</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; col7">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; col8">0</td>
</tr>
</tbody></table>

</div>
</div>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Here I run a logistic regression with a categorical binary response variable of ‘Threatened’ or ‘Nonthreatened’ on species length, coral reef association, and endemism.</p>
<p>I included length in the model because previous research show that species of extreme sizes have higher risk of extinction. Ripple et al.&nbsp;“found that the probability of being threatened was positively and significantly related to body mass for birds, cartilaginous fishes, and mammals” [7]. While body mass is not the same as length, the FishBase data set had few weight entries and many length entries, and sample size was already limited. Several mass coral bleaching events have occurred in Hawaiʻi in recent decades causing ecosystem disruption [8]. Here I consider if reef-associated fish are more likely to be threatened than fish that are not reef-associated. Last, endemic species – species that are native to a region and occur only in that region – are known to be at high risk of extinction.</p>
</section>
<section id="results-discussion" class="level2">
<h2 class="anchored" data-anchor-id="results-discussion">Results &amp; Discussion</h2>
<section id="data-exploration" class="level4">
<h4 class="anchored" data-anchor-id="data-exploration">Data exploration:</h4>
<section id="iucn-red-list-threatened-status" class="level5">
<h5 class="anchored" data-anchor-id="iucn-red-list-threatened-status">1. IUCN Red List Threatened Status</h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>threat_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>is_threatened)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">tab_df</span>(threat_tab,</span>
<span id="cb2-3"><a href="#cb2-3"></a>       <span class="at">title  =</span> <span class="st">"Tbl 2. Counts of threatened species in the data frame"</span>,</span>
<span id="cb2-4"><a href="#cb2-4"></a>       <span class="at">col.header =</span> <span class="st">"Nonthreatened"</span>, <span class="st">"Threatened"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 2. Counts of threatened species in the data frame</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">no</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">yes</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">880</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">34</td>
</tr>
</tbody></table>

</div>
</div>
</section>
<section id="fish-length" class="level5">
<h5 class="anchored" data-anchor-id="fish-length">2. Fish Length</h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">ggplot</span>(tidy_fish_data, <span class="fu">aes</span>(<span class="at">x =</span> length_cm)) <span class="sc">+</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#38b6ba"</span>, <span class="at">bins =</span> <span class="dv">60</span>) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Fig 1. Histogram of species length"</span>) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb3-6"><a href="#cb3-6"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb3-7"><a href="#cb3-7"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb3-8"><a href="#cb3-8"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb3-9"><a href="#cb3-9"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">xlab</span>(<span class="st">"Length (cm)"</span>) <span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="fu">ylab</span>(<span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reef-association" class="level5">
<h5 class="anchored" data-anchor-id="reef-association">3. Reef-Association</h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>reef_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>reef_associated)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">tab_df</span>(reef_tab,</span>
<span id="cb4-3"><a href="#cb4-3"></a>       <span class="at">title =</span> <span class="st">"Tbl 3. Counts of reef-associated species in the data frame"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 3. Counts of reef-associated species in the data frame</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">no</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">yes</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">353</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">312</td>
</tr>
</tbody></table>

</div>
</div>
</section>
<section id="endemism" class="level5">
<h5 class="anchored" data-anchor-id="endemism">4. Endemism</h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>end_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>is_endemic)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">tab_df</span>(end_tab,</span>
<span id="cb5-3"><a href="#cb5-3"></a>       <span class="at">title =</span> <span class="st">"Tbl 4. Counts of endemic species in the data frame"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 4. Counts of endemic species in the data frame</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">no</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">yes</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">895</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">19</td>
</tr>
</tbody></table>

</div>
</div>
<p>After aligning the FishBase data with the IUCN Red List data, the data are disproportionate in both the threat level (Table 2) and endemism (Table 4). Fish length is skewed right (Figure 1), and reef-association is well balanced (Table 3).</p>
</section>
</section>
<section id="analysis" class="level4">
<h4 class="anchored" data-anchor-id="analysis">Analysis:</h4>
<section id="length-operatornamelogitplog-leftfracp1-prightbeta_0beta_1-length-varepsilon" class="level5">
<h5 class="anchored" data-anchor-id="length-operatornamelogitplog-leftfracp1-prightbeta_0beta_1-length-varepsilon"><strong>Length</strong> <span class="math display">\[\operatorname{logit}(p)=\log \left(\frac{p}{1-p}\right)=\beta_0+\beta_1  (Length)  +\varepsilon \]</span></h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>rm_len_na <span class="ot">&lt;-</span> tidy_fish_data <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span>length_cm <span class="sc">==</span> <span class="st">"NA"</span>) <span class="co"># Remove NA length values</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="co"># Plot threat prob. vs. length</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>gg_len <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> rm_len_na, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb6-5"><a href="#cb6-5"></a>                             <span class="at">y =</span> is_of_concern)) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.05</span>, </span>
<span id="cb6-7"><a href="#cb6-7"></a>              <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">col =</span> <span class="st">"#38b6ba"</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, </span>
<span id="cb6-10"><a href="#cb6-10"></a>       <span class="at">y =</span> <span class="st">"Listed as threatened"</span>, </span>
<span id="cb6-11"><a href="#cb6-11"></a>       <span class="at">title =</span> <span class="st">"Fig 2. Probability of being threatened by species length"</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb6-13"><a href="#cb6-13"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb6-14"><a href="#cb6-14"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-15"><a href="#cb6-15"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb6-16"><a href="#cb6-16"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb6-17"><a href="#cb6-17"></a>gg_len <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, </span>
<span id="cb6-18"><a href="#cb6-18"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#545454"</span>, </span>
<span id="cb6-19"><a href="#cb6-19"></a>              <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Log regression length</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>mod_length <span class="ot">&lt;-</span> <span class="fu">glm</span>(is_of_concern <span class="sc">~</span> length_cm, </span>
<span id="cb7-3"><a href="#cb7-3"></a>                  <span class="at">data =</span> rm_len_na, </span>
<span id="cb7-4"><a href="#cb7-4"></a>                  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># Model output table format</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="fu">tab_model</span>(mod_length,</span>
<span id="cb7-7"><a href="#cb7-7"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>),</span>
<span id="cb7-9"><a href="#cb7-9"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb7-10"><a href="#cb7-10"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-11"><a href="#cb7-11"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb7-12"><a href="#cb7-12"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb7-13"><a href="#cb7-13"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-15"><a href="#cb7-15"></a>          <span class="at">title =</span> <span class="st">"Tbl 5. Logisitc Regression Model Results for Length"</span>,</span>
<span id="cb7-16"><a href="#cb7-16"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 5. Logisitc Regression Model Results for Length</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">&nbsp;</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">log Threat Pobability</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">Predictors</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">Log-Odds</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">CI</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">P-value</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Intercept</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-4.505 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-5.149&nbsp;–&nbsp;-3.958</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Length (cm)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.011 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.008&nbsp;–&nbsp;0.014</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">Observations</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">874</td>
</tr>
<tr>
<td colspan="4" style="font-style:italic; border-top:double black; text-align:right;">* p&lt;0.1&nbsp;&nbsp;&nbsp;** p&lt;0.05&nbsp;&nbsp;&nbsp;*** p&lt;0.01</td>
</tr>

</tbody></table>

</div>
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Remove large values to evaluate robustness</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>rm_outliers <span class="ot">&lt;-</span> rm_len_na <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;=</span> <span class="dv">1000</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a>gg_rm_out <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> rm_outliers, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb8-5"><a href="#cb8-5"></a>                                            <span class="at">y =</span> is_of_concern)) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.05</span>, </span>
<span id="cb8-7"><a href="#cb8-7"></a>              <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">col =</span> <span class="st">"#38b6ba"</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, <span class="at">y =</span> <span class="st">"Listed as threatened"</span>, <span class="at">title =</span> <span class="st">"Fig 3. Probability of being threatened by species length </span><span class="sc">\n</span><span class="st"> (excluding outliers)"</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb8-11"><a href="#cb8-11"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb8-12"><a href="#cb8-12"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb8-13"><a href="#cb8-13"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb8-14"><a href="#cb8-14"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb8-15"><a href="#cb8-15"></a>len_rm_out_plot <span class="ot">&lt;-</span> gg_rm_out <span class="sc">+</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, </span>
<span id="cb8-17"><a href="#cb8-17"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#545454"</span>, </span>
<span id="cb8-18"><a href="#cb8-18"></a>              <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>))</span>
<span id="cb8-19"><a href="#cb8-19"></a>len_rm_out_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Log regression length removed outliers</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>mod_rm_out <span class="ot">&lt;-</span> <span class="fu">glm</span>(is_of_concern <span class="sc">~</span> length_cm, </span>
<span id="cb9-3"><a href="#cb9-3"></a>                  <span class="at">data =</span> rm_outliers, </span>
<span id="cb9-4"><a href="#cb9-4"></a>                  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># Model output table format</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="fu">tab_model</span>(mod_rm_out,</span>
<span id="cb9-7"><a href="#cb9-7"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-8"><a href="#cb9-8"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>),</span>
<span id="cb9-9"><a href="#cb9-9"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb9-10"><a href="#cb9-10"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-11"><a href="#cb9-11"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb9-12"><a href="#cb9-12"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb9-13"><a href="#cb9-13"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb9-14"><a href="#cb9-14"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-15"><a href="#cb9-15"></a>          <span class="at">title =</span> <span class="st">"Tbl 6. Logisitc Regression Model Results for Length with Outliers Removed"</span>,</span>
<span id="cb9-16"><a href="#cb9-16"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 6. Logisitc Regression Model Results for Length with Outliers Removed</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">&nbsp;</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">log Threat Pobability</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">Predictors</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">Log-Odds</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">CI</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">P-value</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Intercept</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-4.505 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-5.149&nbsp;–&nbsp;-3.958</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Length (cm)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.011 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.008&nbsp;–&nbsp;0.014</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">Observations</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">872</td>
</tr>
<tr>
<td colspan="4" style="font-style:italic; border-top:double black; text-align:right;">* p&lt;0.1&nbsp;&nbsp;&nbsp;** p&lt;0.05&nbsp;&nbsp;&nbsp;*** p&lt;0.01</td>
</tr>

</tbody></table>

</div>
</div>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Compute fitted probabilities</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>length_plus <span class="ot">&lt;-</span> mod_length <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">augment</span>(<span class="at">type.predict =</span> <span class="st">"response"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">mutate</span>(<span class="at">y_hat =</span> .fitted)</span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="co"># Compute odds scale</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>length_plus <span class="ot">&lt;-</span> length_plus <span class="sc">%&gt;%</span> </span>
<span id="cb10-7"><a href="#cb10-7"></a>  <span class="fu">mutate</span>(<span class="at">odds_hat =</span> y_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> y_hat)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;=</span> <span class="dv">1000</span>) <span class="co"># remove outliers for graphing</span></span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="co"># Graph odds scale</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>len_odds_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(length_plus, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb10-11"><a href="#cb10-11"></a>                                         <span class="at">y =</span> odds_hat)) <span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb10-13"><a href="#cb10-13"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">"Odds of being threatened"</span>) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, </span>
<span id="cb10-16"><a href="#cb10-16"></a>       <span class="at">title =</span> <span class="st">"Fig 4. Odds of being threatened by species length"</span>) <span class="sc">+</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb10-19"><a href="#cb10-19"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb10-20"><a href="#cb10-20"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-21"><a href="#cb10-21"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb10-22"><a href="#cb10-22"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb10-23"><a href="#cb10-23"></a>len_odds_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here we see that longer fish are associated with higher probability of being threatened (Table 5, p-value = &lt;0.001), but two outliers may be driving this significance (Figure 2). However, when the outliers are removed, we still see a significant positive correlation between fish length and probability of threat (Table 6, p-value = &lt;0.001) with the 50% probability mark remaining just over 400 cm (Figure 3). When we compute the odds ratio, we see that there is an exponential relationship between the length and the odds of a species being threatened. Odds of being threatened increase more at large lengths (Figure 4).</p>
<p>Confusion Matrix:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>length_plus <span class="ot">&lt;-</span> <span class="fu">augment</span>(mod_length, <span class="at">type.predict =</span> <span class="st">"response"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">threatened_hat =</span> <span class="fu">round</span>(.fitted)) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">select</span>(is_of_concern, length_cm, .fitted, threatened_hat)</span>
<span id="cb11-4"><a href="#cb11-4"></a>l_con_matrix <span class="ot">&lt;-</span> length_plus <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">select</span>(is_of_concern, threatened_hat) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="fu">table</span>()</span>
<span id="cb11-7"><a href="#cb11-7"></a>rownames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Actually Nonthreatened"</span>, <span class="st">"Actually Threatend"</span>)</span>
<span id="cb11-8"><a href="#cb11-8"></a>colnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Predicted Nonthreatend"</span>, <span class="st">"Predicted Threatened"</span>)</span>
<span id="cb11-9"><a href="#cb11-9"></a>l_con_matrix <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(l_con_matrix[<span class="dv">1</span>], </span>
<span id="cb11-10"><a href="#cb11-10"></a>                                       l_con_matrix[<span class="dv">2</span>], </span>
<span id="cb11-11"><a href="#cb11-11"></a>                                       l_con_matrix[<span class="dv">3</span>], </span>
<span id="cb11-12"><a href="#cb11-12"></a>                                       l_con_matrix[<span class="dv">4</span>]), </span>
<span id="cb11-13"><a href="#cb11-13"></a>                                     <span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb11-14"><a href="#cb11-14"></a>                                     <span class="at">nrow =</span> <span class="dv">2</span>),</span>
<span id="cb11-15"><a href="#cb11-15"></a>                              <span class="at">row.names =</span> rownames)</span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="fu">colnames</span>(l_con_matrix) <span class="ot">&lt;-</span> colnames</span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="fu">tab_df</span>(l_con_matrix,</span>
<span id="cb11-18"><a href="#cb11-18"></a>       <span class="at">title =</span> <span class="st">"Tbl 7. Confusion Matrix Displaying Lenght Model Performance"</span>,</span>
<span id="cb11-19"><a href="#cb11-19"></a>       <span class="at">show.rownames =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 7. Confusion Matrix Displaying Lenght Model Performance</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">Row</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Predicted.Nonthreatend</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Predicted.Threatened</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Actually Nonthreatened</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">835</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">5</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">Actually Threatend</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">22</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">12</td>
</tr>
</tbody></table>

</div>
</div>
<p>The accuracy of the model is 97% with 847 out of 874 predicted observations being correct (Table 7). However, the model seems to be more accurate in predicting species that are not actually of concern (true negative rate = 0.99). Species that are threatened have poorer prediction rates (true positive rate = 0.38).</p>
</section>
<section id="full-model-operatornamelogitplog-leftfracp1-prightbeta_0beta_1-length-beta_2-reef-beta_3-endemic-varepsilon" class="level5">
<h5 class="anchored" data-anchor-id="full-model-operatornamelogitplog-leftfracp1-prightbeta_0beta_1-length-beta_2-reef-beta_3-endemic-varepsilon"><strong>Full Model</strong> <span class="math display">\[\operatorname{logit}(p)=\log \left(\frac{p}{1-p}\right)=\beta_0+\beta_1  (Length) + \beta_2  (Reef) + \beta_3  (Endemic) +\varepsilon \]</span></h5>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">tab_model</span>(mod,</span>
<span id="cb12-2"><a href="#cb12-2"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-3"><a href="#cb12-3"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>, </span>
<span id="cb12-4"><a href="#cb12-4"></a>                          <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>),</span>
<span id="cb12-5"><a href="#cb12-5"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb12-6"><a href="#cb12-6"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb12-7"><a href="#cb12-7"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb12-8"><a href="#cb12-8"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-9"><a href="#cb12-9"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb12-10"><a href="#cb12-10"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-11"><a href="#cb12-11"></a>          <span class="at">title =</span> <span class="st">"Tbl 8. Logisitc Regression Model Results for Length, Reef Association, and Endemism"</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 8. Logisitc Regression Model Results for Length, Reef Association, and Endemism</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm;  text-align:left; ">&nbsp;</th>
<th colspan="3" style="border-top: double; text-align:center; font-style:normal; font-weight:bold; padding:0.2cm; ">log Threat Pobability</th>
</tr>
<tr>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  text-align:left; ">Predictors</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">Log-Odds</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">CI</td>
<td style=" text-align:center; border-bottom:1px solid; font-style:italic; font-weight:normal;  ">P-value</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Intercept</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-4.431 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-5.324&nbsp;–&nbsp;-3.694</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Length (cm)</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.011 <sup>***</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.008&nbsp;–&nbsp;0.014</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  "><strong>&lt;0.001</strong></td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Reef Association</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-0.048 <sup></sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-0.972&nbsp;–&nbsp;0.869</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.918</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Endemic</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">1.989 <sup>*</sup></td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">-0.972&nbsp;–&nbsp;3.798</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  ">0.071</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; padding-top:0.1cm; padding-bottom:0.1cm; border-top:1px solid;">Observations</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; padding-top:0.1cm; padding-bottom:0.1cm; text-align:left; border-top:1px solid;" colspan="3">650</td>
</tr>
<tr>
<td colspan="4" style="font-style:italic; border-top:double black; text-align:right;">* p&lt;0.1&nbsp;&nbsp;&nbsp;** p&lt;0.05&nbsp;&nbsp;&nbsp;*** p&lt;0.01</td>
</tr>

</tbody></table>

</div>
</div>
<p>We can see from the output above that length remains significant (Table 8, p-value = &lt;0.001) even when additional variables are added, making length robust. Endemicity is a significant predictor of threat probability at a significance level of 0.10 (p-value = 0.0707). Coral reef association is not significantly impacting the model (p-value = 0.9175).</p>
</section>
</section>
<section id="predicting-probability-solving-for-p" class="level4">
<h4 class="anchored" data-anchor-id="predicting-probability-solving-for-p">Predicting Probability – Solving for p:</h4>
<p>In this model, the smallest fish in the data set – <em>Melamphaes danae</em> (bigscale) at 2.30 cm – has a probability of being threatened of 0.012. The largest fish in the data set – <em>Rhincodon typus</em> (whale shark) at 1700 cm – has a probability of being threatened of 0.99. Here I use the model to predict the probabilities of being threatened for unlisted fish.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>tidy_pred_rank <span class="ot">&lt;-</span> tidy_pred_rank <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">select</span>(<span class="st">"genus_species"</span>, <span class="st">"length_cm"</span>, <span class="st">"coral_reefs"</span>, <span class="st">"main_common_name"</span>, <span class="st">"reef_associated"</span>, <span class="st">"endemic"</span>, <span class="st">"y_hat"</span>)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">tab_df</span>(tidy_pred_rank[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,],</span>
<span id="cb13-4"><a href="#cb13-4"></a>       <span class="at">title =</span> <span class="st">"Tbl 9. Top 5 Most Vulnerable Unranked Fish in Hawaii"</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>       <span class="at">col.header =</span> <span class="fu">c</span>(<span class="st">"Genus species"</span>, <span class="st">"Length (cm)"</span>, <span class="st">"Reef Association"</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>                          <span class="st">"Common Name"</span>, <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>                          <span class="st">"Threatened"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table style="border-collapse:collapse; border:none;">
<caption style="font-weight: bold; text-align:left;">Tbl 9. Top 5 Most Vulnerable Unranked Fish in Hawaii</caption>
<tbody><tr>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; ">Genus species</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Length (cm)</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Reef Association</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Common Name</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Reef Association</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; ">Endemic</th>
<th style="border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; col7">Threatened</th>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Makaira mazara</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">500</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">0.74</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Istiompax indica</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">465</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">1</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Black Marlin</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">yes</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">0.65</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Echinorhinus cookei</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">400</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Prickly Shark</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">0.49</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; ">Epinephelus lanceolatus</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">270</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">1</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">Giant Grouper</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">yes</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; col7">0.18</td>
</tr>
<tr>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; border-bottom: double; ">Assurger anzac</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">250</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">0</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">NA</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; ">no</td>
<td style=" padding:0.2cm; text-align:left; vertical-align:top; text-align:center; border-bottom: double; col7">0.15</td>
</tr>
</tbody></table>

</div>
</div>
<p>The top five most vulnerable unranked species under this model are <em>Makaira mazara</em> (Indo-Pacific blue marlin), <em>Istiompax indica</em> (black marlin), <em>Echinorhinus cookei</em> (prickly shark), <em>Epinephelus lanceolatus</em> (giant grouper), and <em>Assurger anzac</em> (razorback scabbardfish) (Table 9.) <em>Makaira mazara</em> and <em>Istiompax indica</em> have probabilities of being threatened over 50%. I would recommend the IUCN evaluate these two species before others. However, there are limitations to this analysis and more research should be done before allocating resources to evaluate these species.</p>
</section>
</section>
<section id="limitations-next-steps" class="level2">
<h2 class="anchored" data-anchor-id="limitations-next-steps">Limitations &amp; Next Steps</h2>
<p>As mentioned above, both the IUCN Red List data and the FishBase data have potential biases and don’t evaluate all species. Additionally, not all listed species had every piece of information, and missing data were removed. With missing data removed, the sample became small. It is possible that endemism plays a bigger role in threat risk than illustrated here by the model. Points of concern with this model include disproportionate data in both the threat level and endemism, and high false negative rates in binary prediction. Future analyses could investigate other potential explanatory variables such as metrics measuring fishing pressure, life cycle characteristics, and range. Future analyses should also incorporate indigenous knowledge as Native People in Hawaiʻi know fish history around the islands and are frequently in the water for spearfishing and other recreation. Additionally, future analyses could expand the area of interest to all of the tropics.</p>
<h3 class="anchored">
Reference
</h3>
<p>[1] “IUCN,” IUCN Red List of Threatened Species. Version 2022-1, 2022. https://www.iucnredlist.org/ (accessed Dec.&nbsp;02, 2022).</p>
<p>[2] B. J. Cardinale et al., “Biodiversity loss and its impact on humanity,” Nature, vol.&nbsp;486, no. 7401, Art. no. 7401, Jun.&nbsp;2012, doi: 10.1038/nature11148. [3] M. J. Munstermann et al., “A global ecological signal of extinction risk in terrestrial vertebrates,” Conserv. Biol., vol.&nbsp;36, no. 3, p.&nbsp;e13852, 2022, doi: 10.1111/cobi.13852.</p>
<p>[4] “IUCN,” IUCN Red List of Threatened Species. Version 2022-1, 2015. www.iucnredlist.org</p>
<p>[5] R. Froese and D. Pauly, “FishBase,” 2022. www.fishbase.org</p>
<p>[6] C. Boettiger, D. Temple Lang, and P. Wainwright, “rfishbase: exploring, manipulating and visualizing FishBase data from R.,” J. Fish Biol., 2012, doi: https://doi.org/10.1111/j.1095-8649.2012.03464.x.</p>
<p>[7] W. J. Ripple, C. Wolf, T. M. Newsome, M. Hoffmann, A. J. Wirsing, and D. J. McCauley, “Extinction risk is most acute for the world’s largest and smallest vertebrates,” Proc. Natl. Acad. Sci. U. S. A., vol.&nbsp;114, no. 40, pp.&nbsp;10678–10683, Oct.&nbsp;2017, doi: 10.1073/pnas.1702078114.</p>
<p>[8] K. D. Bahr, P. L. Jokiel, and K. S. Rodgers, “The 2014 coral bleaching and freshwater flood events in Kāneʻohe Bay, Hawaiʻi,” PeerJ, vol.&nbsp;3, p.&nbsp;e1136, Aug.&nbsp;2015, doi: 10.7717/peerj.1136.</p>


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{windschitl2022,
  author = {Elke Windschitl},
  title = {Identifying {Key} {Traits} in {Hawaiian} {Fish} That
    {Predict} {Risk} of {Extinction}},
  date = {2022-12-02},
  url = {https://elkewind.github.io/posts/2022-12-02-hawaiian-fish-analysis},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-windschitl2022" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Elke Windschitl. 2022. <span>“Identifying Key Traits in Hawaiian Fish
That Predict Risk of Extinction.”</span> December 2, 2022. <a href="https://elkewind.github.io/posts/2022-12-02-hawaiian-fish-analysis">https://elkewind.github.io/posts/2022-12-02-hawaiian-fish-analysis</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb14" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">---</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="an">title:</span><span class="co"> "Identifying Key Traits in Hawaiian Fish that Predict Risk of Extinction"</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="an">author:</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co">  - name: Elke Windschitl</span></span>
<span id="cb14-5"><a href="#cb14-5"></a><span class="co">    url: https://elkewind.github.io</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="co">    affiliation: UCSB Bren School</span></span>
<span id="cb14-7"><a href="#cb14-7"></a><span class="co">    affiliation-url: http://ucsb-meds.github.io</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="an">description:</span><span class="co"> "A logistic regression example with fish"</span></span>
<span id="cb14-9"><a href="#cb14-9"></a><span class="an">date:</span><span class="co"> 2022-12-02</span></span>
<span id="cb14-10"><a href="#cb14-10"></a><span class="an">categories:</span><span class="co"> [MEDS, Statistics, R]</span></span>
<span id="cb14-11"><a href="#cb14-11"></a><span class="an">citation:</span><span class="co"> </span></span>
<span id="cb14-12"><a href="#cb14-12"></a><span class="co">  url: https://elkewind.github.io/posts/2022-12-02-hawaiian-fish-analysis</span></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="an">image:</span><span class="co"> dive_mask.JPG</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb14-15"><a href="#cb14-15"></a><span class="co">  html:</span></span>
<span id="cb14-16"><a href="#cb14-16"></a><span class="co">    code-fold: true</span></span>
<span id="cb14-17"><a href="#cb14-17"></a><span class="co">    code-copy: true</span></span>
<span id="cb14-18"><a href="#cb14-18"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb14-19"><a href="#cb14-19"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb14-20"><a href="#cb14-20"></a><span class="co">    code-tools: true</span></span>
<span id="cb14-21"><a href="#cb14-21"></a><span class="co">    code-block-border-left: true</span></span>
<span id="cb14-22"><a href="#cb14-22"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb14-23"><a href="#cb14-23"></a><span class="an">draft:</span><span class="co"> false</span></span>
<span id="cb14-24"><a href="#cb14-24"></a><span class="co">---</span></span>
<span id="cb14-25"><a href="#cb14-25"></a></span>
<span id="cb14-28"><a href="#cb14-28"></a><span class="in">```{r}</span></span>
<span id="cb14-29"><a href="#cb14-29"></a><span class="co">#| include: false</span></span>
<span id="cb14-30"><a href="#cb14-30"></a><span class="fu">source</span>(<span class="st">"/Users/elkewindschitl/Documents/MEDS/eds-222/final-proj/eds-222-final-project/clean-code/website-source-code.R"</span>)</span>
<span id="cb14-31"><a href="#cb14-31"></a><span class="in">```</span></span>
<span id="cb14-32"><a href="#cb14-32"></a></span>
<span id="cb14-33"><a href="#cb14-33"></a>Description:</span>
<span id="cb14-34"><a href="#cb14-34"></a></span>
<span id="cb14-35"><a href="#cb14-35"></a>In this post, I investigate Hawaiian fish ecological traits -- such as size, endemism, and reef-association -- to find their probability of being threatened as ranked by the IUCN Red List. For my full analysis, check out my <span class="co">[</span><span class="ot">github repository</span><span class="co">](https://github.com/elkewind/eds-222-final-project)</span>.</span>
<span id="cb14-36"><a href="#cb14-36"></a></span>
<span id="cb14-37"><a href="#cb14-37"></a><span class="al">![School of Hawaiian fish. Elke Windschitl 2018.](fish_pic.JPG)</span></span>
<span id="cb14-38"><a href="#cb14-38"></a></span>
<span id="cb14-39"><a href="#cb14-39"></a><span class="fu">## Introduction</span></span>
<span id="cb14-40"><a href="#cb14-40"></a></span>
<span id="cb14-41"><a href="#cb14-41"></a>Global human activity threatens many species with extinction. According to the International Union and Conservation of Nature (IUCN), "More than 41,000 species are threatened with extinction. That is still 28% of all assessed species." <span class="sc">\[</span>1<span class="sc">\]</span>. Increased extinction and loss of biodiversity can have severe ecological, economic, and cultural impacts. Cardinale et al.'s deep dive into biodiversity and ecosystem services research conclude that biodiversity loss reduces ecological communities' efficiency, stability, and productivity. Decreased productivity from ecosystem services can have a negative impact on ecosystem economics <span class="sc">\[</span>2<span class="sc">\]</span>. Additionally, cultures worldwide have strong ties to local flora and fauna, much of which now face extinction risk. Improving understanding of extinction risk is ecologically, economically, and culturally important.</span>
<span id="cb14-42"><a href="#cb14-42"></a></span>
<span id="cb14-43"><a href="#cb14-43"></a>Wildlife scientists have been working to understand what ecological traits of vertebrates predict threat level, and what common risk factors drive those threat level rates. Munstermann et al. investigate what terrestrial vertebrate functional groups are most at risk of extinction threat and find that cave dwelling amphibian, arboreal quadrupedal mammals, aerial and scavenging birds, and pedal squamates are at high risk <span class="sc">\[</span>3<span class="sc">\]</span>. This knowledge can help inform policies and practices with the goal to decrease threats of extinction of wildlife. However, less comprehensive research has been done to conduct similar analyses on marine species.</span>
<span id="cb14-44"><a href="#cb14-44"></a></span>
<span id="cb14-45"><a href="#cb14-45"></a>In recent years, the waters surrounding the Hawaiian Islands have been exposed to ecological changes due to mass coral bleaching events, El Niño events, and pollution. Rapidly changing marine ecosystems may pose a threat to Hawaiian fish. Fish hold significant cultural value in Hawaiʻi, and many local people rely on seafood as a major source of protein. However, approximately 72% of fish in Hawaiʻi present in FishBase have been evaluated by the IUCN and have sufficient data to be assessed. Here I run a small-scale analysis to investigate Hawaiian fish ecological traits -- such as endemism, size, and reef-association -- to predict a binary status on the IUCN red list and predict which unevaluated fish species in Hawaiʻi may be threatened.</span>
<span id="cb14-46"><a href="#cb14-46"></a></span>
<span id="cb14-47"><a href="#cb14-47"></a><span class="al">![Various fish found in Hawaiʻi. Elke Windschitl 2018.](fish_collage.jpg)</span></span>
<span id="cb14-48"><a href="#cb14-48"></a></span>
<span id="cb14-49"><a href="#cb14-49"></a><span class="fu">## Data</span></span>
<span id="cb14-50"><a href="#cb14-50"></a></span>
<span id="cb14-51"><a href="#cb14-51"></a>For my analyses I use the IUCN Red List data accessed via the <span class="co">[</span><span class="ot">IUCN Red List API</span><span class="co">](https://apiv3.iucnredlist.org/)</span> <span class="sc">\[</span>1<span class="sc">\]</span> and package rredlist <span class="sc">\[</span>4<span class="sc">\]</span>. Consistent with Munstermann et al., living species listed as 'Vulnerable', 'Endangered', or 'Critically Endangered' were categorized as 'Threatened'. Living species listed as 'Least Concern' and 'Near Threatened' were categorized as 'Nonthreatened' <span class="sc">\[</span>3<span class="sc">\]</span>. Extinct species were not evaluated in this analysis. The IUCN Red List data are limited in that many marine species have not been listed yet or have been identified as too data deficient to be evaluated. The lack of data on elusive fish may introduce bias into the model.</span>
<span id="cb14-52"><a href="#cb14-52"></a></span>
<span id="cb14-53"><a href="#cb14-53"></a>Fish ecological data were accessed from <span class="co">[</span><span class="ot">FishBase</span><span class="co">](https://fishbase.net.br/search.php)</span> <span class="sc">\[</span>5<span class="sc">\]</span> via package rfishbase <span class="sc">\[</span>6<span class="sc">\]</span>. Different species in the FishBase data were originally described by different people, possibly leading to errors or biases. Measurement errors in length may be present, as there are various common ways to measure the length of a fish. The species recorded in FishBase may be biased towards fish with commercial value. Data were wrangled in R and formatted in a tidy data table (Table 1.)</span>
<span id="cb14-54"><a href="#cb14-54"></a></span>
<span id="cb14-57"><a href="#cb14-57"></a><span class="in">```{r}</span></span>
<span id="cb14-58"><a href="#cb14-58"></a><span class="co">#| echo: false</span></span>
<span id="cb14-59"><a href="#cb14-59"></a><span class="co">#| warning: false</span></span>
<span id="cb14-60"><a href="#cb14-60"></a>tidy_fish_data <span class="ot">&lt;-</span> tidy_fish_data <span class="sc">%&gt;%</span> </span>
<span id="cb14-61"><a href="#cb14-61"></a>  <span class="fu">select</span>(<span class="st">"genus_species"</span>, <span class="st">"length_cm"</span>, <span class="st">"category"</span>, <span class="st">"main_common_name"</span>, <span class="st">"reef_associated"</span>, <span class="st">"is_endemic"</span>, <span class="st">"is_threatened"</span>, <span class="st">"is_of_concern"</span>)</span>
<span id="cb14-62"><a href="#cb14-62"></a><span class="in">```</span></span>
<span id="cb14-63"><a href="#cb14-63"></a></span>
<span id="cb14-66"><a href="#cb14-66"></a><span class="in">```{r}</span></span>
<span id="cb14-67"><a href="#cb14-67"></a><span class="co">#| warning: false</span></span>
<span id="cb14-68"><a href="#cb14-68"></a><span class="fu">tab_df</span>(tidy_fish_data[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,],</span>
<span id="cb14-69"><a href="#cb14-69"></a>       <span class="at">title =</span> <span class="st">"Tbl 1. Hawaii Fish Data"</span>,</span>
<span id="cb14-70"><a href="#cb14-70"></a>       <span class="at">col.header =</span> <span class="fu">c</span>(<span class="st">"Genus species"</span>, <span class="st">"Length (cm)"</span>, <span class="st">"IUCN Category"</span>, </span>
<span id="cb14-71"><a href="#cb14-71"></a>                          <span class="st">"Common Name"</span>, <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>,</span>
<span id="cb14-72"><a href="#cb14-72"></a>                          <span class="st">"Threatened"</span>, <span class="st">"Threatened Binary"</span>))</span>
<span id="cb14-73"><a href="#cb14-73"></a>       </span>
<span id="cb14-74"><a href="#cb14-74"></a><span class="in">```</span></span>
<span id="cb14-75"><a href="#cb14-75"></a></span>
<span id="cb14-76"><a href="#cb14-76"></a><span class="fu">## Methods</span></span>
<span id="cb14-77"><a href="#cb14-77"></a></span>
<span id="cb14-78"><a href="#cb14-78"></a>Here I run a logistic regression with a categorical binary response variable of 'Threatened' or 'Nonthreatened' on species length, coral reef association, and endemism.</span>
<span id="cb14-79"><a href="#cb14-79"></a></span>
<span id="cb14-80"><a href="#cb14-80"></a>I included length in the model because previous research show that species of extreme sizes have higher risk of extinction. Ripple et al. "found that the probability of being threatened was positively and significantly related to body mass for birds, cartilaginous fishes, and mammals" <span class="sc">\[</span>7<span class="sc">\]</span>. While body mass is not the same as length, the FishBase data set had few weight entries and many length entries, and sample size was already limited. Several mass coral bleaching events have occurred in Hawaiʻi in recent decades causing ecosystem disruption <span class="sc">\[</span>8<span class="sc">\]</span>. Here I consider if reef-associated fish are more likely to be threatened than fish that are not reef-associated. Last, endemic species -- species that are native to a region and occur only in that region -- are known to be at high risk of extinction.</span>
<span id="cb14-81"><a href="#cb14-81"></a></span>
<span id="cb14-82"><a href="#cb14-82"></a><span class="fu">## Results &amp; Discussion</span></span>
<span id="cb14-83"><a href="#cb14-83"></a></span>
<span id="cb14-84"><a href="#cb14-84"></a><span class="fu">#### Data exploration:</span></span>
<span id="cb14-85"><a href="#cb14-85"></a></span>
<span id="cb14-86"><a href="#cb14-86"></a><span class="fu">##### 1. IUCN Red List Threatened Status</span></span>
<span id="cb14-87"><a href="#cb14-87"></a></span>
<span id="cb14-90"><a href="#cb14-90"></a><span class="in">```{r}</span></span>
<span id="cb14-91"><a href="#cb14-91"></a><span class="co">#| warning: false</span></span>
<span id="cb14-92"><a href="#cb14-92"></a>threat_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>is_threatened)</span>
<span id="cb14-93"><a href="#cb14-93"></a><span class="fu">tab_df</span>(threat_tab,</span>
<span id="cb14-94"><a href="#cb14-94"></a>       <span class="at">title  =</span> <span class="st">"Tbl 2. Counts of threatened species in the data frame"</span>,</span>
<span id="cb14-95"><a href="#cb14-95"></a>       <span class="at">col.header =</span> <span class="st">"Nonthreatened"</span>, <span class="st">"Threatened"</span>)</span>
<span id="cb14-96"><a href="#cb14-96"></a><span class="in">```</span></span>
<span id="cb14-97"><a href="#cb14-97"></a></span>
<span id="cb14-98"><a href="#cb14-98"></a><span class="fu">##### 2. Fish Length</span></span>
<span id="cb14-99"><a href="#cb14-99"></a></span>
<span id="cb14-102"><a href="#cb14-102"></a><span class="in">```{r}</span></span>
<span id="cb14-103"><a href="#cb14-103"></a><span class="co">#| warning: false</span></span>
<span id="cb14-104"><a href="#cb14-104"></a><span class="fu">ggplot</span>(tidy_fish_data, <span class="fu">aes</span>(<span class="at">x =</span> length_cm)) <span class="sc">+</span></span>
<span id="cb14-105"><a href="#cb14-105"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#38b6ba"</span>, <span class="at">bins =</span> <span class="dv">60</span>) <span class="sc">+</span></span>
<span id="cb14-106"><a href="#cb14-106"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-107"><a href="#cb14-107"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Fig 1. Histogram of species length"</span>) <span class="sc">+</span></span>
<span id="cb14-108"><a href="#cb14-108"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-109"><a href="#cb14-109"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-110"><a href="#cb14-110"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-111"><a href="#cb14-111"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb14-112"><a href="#cb14-112"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb14-113"><a href="#cb14-113"></a>  <span class="fu">xlab</span>(<span class="st">"Length (cm)"</span>) <span class="sc">+</span></span>
<span id="cb14-114"><a href="#cb14-114"></a>  <span class="fu">ylab</span>(<span class="st">"Count"</span>)</span>
<span id="cb14-115"><a href="#cb14-115"></a><span class="in">```</span></span>
<span id="cb14-116"><a href="#cb14-116"></a></span>
<span id="cb14-117"><a href="#cb14-117"></a><span class="fu">##### 3. Reef-Association</span></span>
<span id="cb14-118"><a href="#cb14-118"></a></span>
<span id="cb14-121"><a href="#cb14-121"></a><span class="in">```{r}</span></span>
<span id="cb14-122"><a href="#cb14-122"></a><span class="co">#| warning: false</span></span>
<span id="cb14-123"><a href="#cb14-123"></a>reef_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>reef_associated)</span>
<span id="cb14-124"><a href="#cb14-124"></a><span class="fu">tab_df</span>(reef_tab,</span>
<span id="cb14-125"><a href="#cb14-125"></a>       <span class="at">title =</span> <span class="st">"Tbl 3. Counts of reef-associated species in the data frame"</span>)</span>
<span id="cb14-126"><a href="#cb14-126"></a><span class="in">```</span></span>
<span id="cb14-127"><a href="#cb14-127"></a></span>
<span id="cb14-128"><a href="#cb14-128"></a><span class="fu">##### 4. Endemism</span></span>
<span id="cb14-129"><a href="#cb14-129"></a></span>
<span id="cb14-132"><a href="#cb14-132"></a><span class="in">```{r}</span></span>
<span id="cb14-133"><a href="#cb14-133"></a><span class="co">#| warning: false</span></span>
<span id="cb14-134"><a href="#cb14-134"></a>end_tab <span class="ot">&lt;-</span> <span class="fu">table</span>(tidy_fish_data<span class="sc">$</span>is_endemic)</span>
<span id="cb14-135"><a href="#cb14-135"></a><span class="fu">tab_df</span>(end_tab,</span>
<span id="cb14-136"><a href="#cb14-136"></a>       <span class="at">title =</span> <span class="st">"Tbl 4. Counts of endemic species in the data frame"</span>)</span>
<span id="cb14-137"><a href="#cb14-137"></a><span class="in">```</span></span>
<span id="cb14-138"><a href="#cb14-138"></a></span>
<span id="cb14-139"><a href="#cb14-139"></a>After aligning the FishBase data with the IUCN Red List data, the data are disproportionate in both the threat level (Table 2) and endemism (Table 4). Fish length is skewed right (Figure 1), and reef-association is well balanced (Table 3).</span>
<span id="cb14-140"><a href="#cb14-140"></a></span>
<span id="cb14-141"><a href="#cb14-141"></a><span class="fu">#### Analysis:</span></span>
<span id="cb14-142"><a href="#cb14-142"></a></span>
<span id="cb14-143"><a href="#cb14-143"></a><span class="fu">##### **Length** $$\operatorname{logit}(p)=\log \left(\frac{p}{1-p}\right)=\beta_0+\beta_1  (Length)  +\varepsilon $$</span></span>
<span id="cb14-144"><a href="#cb14-144"></a></span>
<span id="cb14-147"><a href="#cb14-147"></a><span class="in">```{r}</span></span>
<span id="cb14-148"><a href="#cb14-148"></a><span class="co">#| warning: false</span></span>
<span id="cb14-149"><a href="#cb14-149"></a>rm_len_na <span class="ot">&lt;-</span> tidy_fish_data <span class="sc">%&gt;%</span> </span>
<span id="cb14-150"><a href="#cb14-150"></a>  <span class="fu">filter</span>(<span class="sc">!</span>length_cm <span class="sc">==</span> <span class="st">"NA"</span>) <span class="co"># Remove NA length values</span></span>
<span id="cb14-151"><a href="#cb14-151"></a><span class="co"># Plot threat prob. vs. length</span></span>
<span id="cb14-152"><a href="#cb14-152"></a>gg_len <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> rm_len_na, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb14-153"><a href="#cb14-153"></a>                             <span class="at">y =</span> is_of_concern)) <span class="sc">+</span></span>
<span id="cb14-154"><a href="#cb14-154"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.05</span>, </span>
<span id="cb14-155"><a href="#cb14-155"></a>              <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">col =</span> <span class="st">"#38b6ba"</span>) <span class="sc">+</span></span>
<span id="cb14-156"><a href="#cb14-156"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-157"><a href="#cb14-157"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, </span>
<span id="cb14-158"><a href="#cb14-158"></a>       <span class="at">y =</span> <span class="st">"Listed as threatened"</span>, </span>
<span id="cb14-159"><a href="#cb14-159"></a>       <span class="at">title =</span> <span class="st">"Fig 2. Probability of being threatened by species length"</span>) <span class="sc">+</span></span>
<span id="cb14-160"><a href="#cb14-160"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-161"><a href="#cb14-161"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-162"><a href="#cb14-162"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-163"><a href="#cb14-163"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb14-164"><a href="#cb14-164"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb14-165"><a href="#cb14-165"></a>gg_len <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, </span>
<span id="cb14-166"><a href="#cb14-166"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#545454"</span>, </span>
<span id="cb14-167"><a href="#cb14-167"></a>              <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>))</span>
<span id="cb14-168"><a href="#cb14-168"></a><span class="co"># Log regression length</span></span>
<span id="cb14-169"><a href="#cb14-169"></a>mod_length <span class="ot">&lt;-</span> <span class="fu">glm</span>(is_of_concern <span class="sc">~</span> length_cm, </span>
<span id="cb14-170"><a href="#cb14-170"></a>                  <span class="at">data =</span> rm_len_na, </span>
<span id="cb14-171"><a href="#cb14-171"></a>                  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb14-172"><a href="#cb14-172"></a><span class="co"># Model output table format</span></span>
<span id="cb14-173"><a href="#cb14-173"></a><span class="fu">tab_model</span>(mod_length,</span>
<span id="cb14-174"><a href="#cb14-174"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-175"><a href="#cb14-175"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>),</span>
<span id="cb14-176"><a href="#cb14-176"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb14-177"><a href="#cb14-177"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-178"><a href="#cb14-178"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb14-179"><a href="#cb14-179"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb14-180"><a href="#cb14-180"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb14-181"><a href="#cb14-181"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-182"><a href="#cb14-182"></a>          <span class="at">title =</span> <span class="st">"Tbl 5. Logisitc Regression Model Results for Length"</span>,</span>
<span id="cb14-183"><a href="#cb14-183"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb14-184"><a href="#cb14-184"></a><span class="co"># Remove large values to evaluate robustness</span></span>
<span id="cb14-185"><a href="#cb14-185"></a>rm_outliers <span class="ot">&lt;-</span> rm_len_na <span class="sc">%&gt;%</span> </span>
<span id="cb14-186"><a href="#cb14-186"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;=</span> <span class="dv">1000</span>)</span>
<span id="cb14-187"><a href="#cb14-187"></a>gg_rm_out <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> rm_outliers, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb14-188"><a href="#cb14-188"></a>                                            <span class="at">y =</span> is_of_concern)) <span class="sc">+</span></span>
<span id="cb14-189"><a href="#cb14-189"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.05</span>, </span>
<span id="cb14-190"><a href="#cb14-190"></a>              <span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">col =</span> <span class="st">"#38b6ba"</span>) <span class="sc">+</span></span>
<span id="cb14-191"><a href="#cb14-191"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, <span class="at">y =</span> <span class="st">"Listed as threatened"</span>, <span class="at">title =</span> <span class="st">"Fig 3. Probability of being threatened by species length </span><span class="sc">\n</span><span class="st"> (excluding outliers)"</span>) <span class="sc">+</span></span>
<span id="cb14-192"><a href="#cb14-192"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-193"><a href="#cb14-193"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-194"><a href="#cb14-194"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-195"><a href="#cb14-195"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-196"><a href="#cb14-196"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb14-197"><a href="#cb14-197"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb14-198"><a href="#cb14-198"></a>len_rm_out_plot <span class="ot">&lt;-</span> gg_rm_out <span class="sc">+</span></span>
<span id="cb14-199"><a href="#cb14-199"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, </span>
<span id="cb14-200"><a href="#cb14-200"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#545454"</span>, </span>
<span id="cb14-201"><a href="#cb14-201"></a>              <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>))</span>
<span id="cb14-202"><a href="#cb14-202"></a>len_rm_out_plot</span>
<span id="cb14-203"><a href="#cb14-203"></a><span class="co"># Log regression length removed outliers</span></span>
<span id="cb14-204"><a href="#cb14-204"></a>mod_rm_out <span class="ot">&lt;-</span> <span class="fu">glm</span>(is_of_concern <span class="sc">~</span> length_cm, </span>
<span id="cb14-205"><a href="#cb14-205"></a>                  <span class="at">data =</span> rm_outliers, </span>
<span id="cb14-206"><a href="#cb14-206"></a>                  <span class="at">family =</span> <span class="st">"binomial"</span>)</span>
<span id="cb14-207"><a href="#cb14-207"></a><span class="co"># Model output table format</span></span>
<span id="cb14-208"><a href="#cb14-208"></a><span class="fu">tab_model</span>(mod_rm_out,</span>
<span id="cb14-209"><a href="#cb14-209"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-210"><a href="#cb14-210"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>),</span>
<span id="cb14-211"><a href="#cb14-211"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb14-212"><a href="#cb14-212"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-213"><a href="#cb14-213"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb14-214"><a href="#cb14-214"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb14-215"><a href="#cb14-215"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb14-216"><a href="#cb14-216"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-217"><a href="#cb14-217"></a>          <span class="at">title =</span> <span class="st">"Tbl 6. Logisitc Regression Model Results for Length with Outliers Removed"</span>,</span>
<span id="cb14-218"><a href="#cb14-218"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb14-219"><a href="#cb14-219"></a><span class="in">```</span></span>
<span id="cb14-220"><a href="#cb14-220"></a></span>
<span id="cb14-223"><a href="#cb14-223"></a><span class="in">```{r}</span></span>
<span id="cb14-224"><a href="#cb14-224"></a><span class="co">#| warning: false</span></span>
<span id="cb14-225"><a href="#cb14-225"></a><span class="co"># Compute fitted probabilities</span></span>
<span id="cb14-226"><a href="#cb14-226"></a>length_plus <span class="ot">&lt;-</span> mod_length <span class="sc">%&gt;%</span></span>
<span id="cb14-227"><a href="#cb14-227"></a>  <span class="fu">augment</span>(<span class="at">type.predict =</span> <span class="st">"response"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-228"><a href="#cb14-228"></a>  <span class="fu">mutate</span>(<span class="at">y_hat =</span> .fitted)</span>
<span id="cb14-229"><a href="#cb14-229"></a><span class="co"># Compute odds scale</span></span>
<span id="cb14-230"><a href="#cb14-230"></a>length_plus <span class="ot">&lt;-</span> length_plus <span class="sc">%&gt;%</span> </span>
<span id="cb14-231"><a href="#cb14-231"></a>  <span class="fu">mutate</span>(<span class="at">odds_hat =</span> y_hat <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> y_hat)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-232"><a href="#cb14-232"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;=</span> <span class="dv">1000</span>) <span class="co"># remove outliers for graphing</span></span>
<span id="cb14-233"><a href="#cb14-233"></a><span class="co"># Graph odds scale</span></span>
<span id="cb14-234"><a href="#cb14-234"></a>len_odds_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(length_plus, <span class="fu">aes</span>(<span class="at">x =</span> length_cm, </span>
<span id="cb14-235"><a href="#cb14-235"></a>                                         <span class="at">y =</span> odds_hat)) <span class="sc">+</span></span>
<span id="cb14-236"><a href="#cb14-236"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb14-237"><a href="#cb14-237"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb14-238"><a href="#cb14-238"></a>  <span class="fu">scale_y_continuous</span>(<span class="st">"Odds of being threatened"</span>) <span class="sc">+</span></span>
<span id="cb14-239"><a href="#cb14-239"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Species length (cm)"</span>, </span>
<span id="cb14-240"><a href="#cb14-240"></a>       <span class="at">title =</span> <span class="st">"Fig 4. Odds of being threatened by species length"</span>) <span class="sc">+</span></span>
<span id="cb14-241"><a href="#cb14-241"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-242"><a href="#cb14-242"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-243"><a href="#cb14-243"></a>        <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#F8F8F8"</span>),</span>
<span id="cb14-244"><a href="#cb14-244"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-245"><a href="#cb14-245"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">'#c9c9c9'</span>),</span>
<span id="cb14-246"><a href="#cb14-246"></a>        <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="dv">1</span>))</span>
<span id="cb14-247"><a href="#cb14-247"></a>len_odds_plot</span>
<span id="cb14-248"><a href="#cb14-248"></a><span class="in">```</span></span>
<span id="cb14-249"><a href="#cb14-249"></a></span>
<span id="cb14-250"><a href="#cb14-250"></a>Here we see that longer fish are associated with higher probability of being threatened (Table 5, p-value = <span class="sc">\&lt;</span>0.001), but two outliers may be driving this significance (Figure 2). However, when the outliers are removed, we still see a significant positive correlation between fish length and probability of threat (Table 6, p-value = <span class="sc">\&lt;</span>0.001) with the 50% probability mark remaining just over 400 cm (Figure 3). When we compute the odds ratio, we see that there is an exponential relationship between the length and the odds of a species being threatened. Odds of being threatened increase more at large lengths (Figure 4).</span>
<span id="cb14-251"><a href="#cb14-251"></a></span>
<span id="cb14-252"><a href="#cb14-252"></a>Confusion Matrix:</span>
<span id="cb14-253"><a href="#cb14-253"></a></span>
<span id="cb14-256"><a href="#cb14-256"></a><span class="in">```{r}</span></span>
<span id="cb14-257"><a href="#cb14-257"></a><span class="co">#| warning: false</span></span>
<span id="cb14-258"><a href="#cb14-258"></a>length_plus <span class="ot">&lt;-</span> <span class="fu">augment</span>(mod_length, <span class="at">type.predict =</span> <span class="st">"response"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-259"><a href="#cb14-259"></a>  <span class="fu">mutate</span>(<span class="at">threatened_hat =</span> <span class="fu">round</span>(.fitted)) <span class="sc">%&gt;%</span></span>
<span id="cb14-260"><a href="#cb14-260"></a>  <span class="fu">select</span>(is_of_concern, length_cm, .fitted, threatened_hat)</span>
<span id="cb14-261"><a href="#cb14-261"></a>l_con_matrix <span class="ot">&lt;-</span> length_plus <span class="sc">%&gt;%</span></span>
<span id="cb14-262"><a href="#cb14-262"></a>  <span class="fu">select</span>(is_of_concern, threatened_hat) <span class="sc">%&gt;%</span></span>
<span id="cb14-263"><a href="#cb14-263"></a>  <span class="fu">table</span>()</span>
<span id="cb14-264"><a href="#cb14-264"></a>rownames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Actually Nonthreatened"</span>, <span class="st">"Actually Threatend"</span>)</span>
<span id="cb14-265"><a href="#cb14-265"></a>colnames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Predicted Nonthreatend"</span>, <span class="st">"Predicted Threatened"</span>)</span>
<span id="cb14-266"><a href="#cb14-266"></a>l_con_matrix <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">matrix</span>(<span class="fu">c</span>(l_con_matrix[<span class="dv">1</span>], </span>
<span id="cb14-267"><a href="#cb14-267"></a>                                       l_con_matrix[<span class="dv">2</span>], </span>
<span id="cb14-268"><a href="#cb14-268"></a>                                       l_con_matrix[<span class="dv">3</span>], </span>
<span id="cb14-269"><a href="#cb14-269"></a>                                       l_con_matrix[<span class="dv">4</span>]), </span>
<span id="cb14-270"><a href="#cb14-270"></a>                                     <span class="at">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb14-271"><a href="#cb14-271"></a>                                     <span class="at">nrow =</span> <span class="dv">2</span>),</span>
<span id="cb14-272"><a href="#cb14-272"></a>                              <span class="at">row.names =</span> rownames)</span>
<span id="cb14-273"><a href="#cb14-273"></a><span class="fu">colnames</span>(l_con_matrix) <span class="ot">&lt;-</span> colnames</span>
<span id="cb14-274"><a href="#cb14-274"></a><span class="fu">tab_df</span>(l_con_matrix,</span>
<span id="cb14-275"><a href="#cb14-275"></a>       <span class="at">title =</span> <span class="st">"Tbl 7. Confusion Matrix Displaying Lenght Model Performance"</span>,</span>
<span id="cb14-276"><a href="#cb14-276"></a>       <span class="at">show.rownames =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-277"><a href="#cb14-277"></a><span class="in">```</span></span>
<span id="cb14-278"><a href="#cb14-278"></a></span>
<span id="cb14-279"><a href="#cb14-279"></a>The accuracy of the model is 97% with 847 out of 874 predicted observations being correct (Table 7). However, the model seems to be more accurate in predicting species that are not actually of concern (true negative rate = 0.99). Species that are threatened have poorer prediction rates (true positive rate = 0.38).</span>
<span id="cb14-280"><a href="#cb14-280"></a></span>
<span id="cb14-281"><a href="#cb14-281"></a><span class="fu">##### **Full Model** $$\operatorname{logit}(p)=\log \left(\frac{p}{1-p}\right)=\beta_0+\beta_1  (Length) + \beta_2  (Reef) + \beta_3  (Endemic) +\varepsilon $$</span></span>
<span id="cb14-282"><a href="#cb14-282"></a></span>
<span id="cb14-285"><a href="#cb14-285"></a><span class="in">```{r}</span></span>
<span id="cb14-286"><a href="#cb14-286"></a><span class="co">#| warning: false</span></span>
<span id="cb14-287"><a href="#cb14-287"></a><span class="fu">tab_model</span>(mod,</span>
<span id="cb14-288"><a href="#cb14-288"></a>          <span class="at">transform =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-289"><a href="#cb14-289"></a>          <span class="at">pred.labels =</span> <span class="fu">c</span>(<span class="st">"Intercept"</span>, <span class="st">"Length (cm)"</span>, </span>
<span id="cb14-290"><a href="#cb14-290"></a>                          <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>),</span>
<span id="cb14-291"><a href="#cb14-291"></a>          <span class="at">dv.labels =</span> <span class="fu">c</span>(<span class="st">"log Threat Pobability"</span>),</span>
<span id="cb14-292"><a href="#cb14-292"></a>          <span class="at">p.style =</span> <span class="fu">c</span>(<span class="st">"numeric_stars"</span>),</span>
<span id="cb14-293"><a href="#cb14-293"></a>          <span class="at">p.threshold =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.05</span>, <span class="fl">0.01</span>),</span>
<span id="cb14-294"><a href="#cb14-294"></a>          <span class="at">show.p =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-295"><a href="#cb14-295"></a>          <span class="at">string.p =</span> <span class="st">"P-value"</span>,</span>
<span id="cb14-296"><a href="#cb14-296"></a>          <span class="at">show.r2 =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-297"><a href="#cb14-297"></a>          <span class="at">title =</span> <span class="st">"Tbl 8. Logisitc Regression Model Results for Length, Reef Association, and Endemism"</span>,</span>
<span id="cb14-298"><a href="#cb14-298"></a>          <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb14-299"><a href="#cb14-299"></a><span class="in">```</span></span>
<span id="cb14-300"><a href="#cb14-300"></a></span>
<span id="cb14-301"><a href="#cb14-301"></a>We can see from the output above that length remains significant (Table 8, p-value = <span class="sc">\&lt;</span>0.001) even when additional variables are added, making length robust. Endemicity is a significant predictor of threat probability at a significance level of 0.10 (p-value = 0.0707). Coral reef association is not significantly impacting the model (p-value = 0.9175).</span>
<span id="cb14-302"><a href="#cb14-302"></a></span>
<span id="cb14-303"><a href="#cb14-303"></a><span class="fu">#### Predicting Probability -- Solving for p:</span></span>
<span id="cb14-304"><a href="#cb14-304"></a></span>
<span id="cb14-305"><a href="#cb14-305"></a>In this model, the smallest fish in the data set -- *Melamphaes danae* (bigscale) at 2.30 cm -- has a probability of being threatened of 0.012. The largest fish in the data set -- *Rhincodon typus* (whale shark) at 1700 cm -- has a probability of being threatened of 0.99. Here I use the model to predict the probabilities of being threatened for unlisted fish.</span>
<span id="cb14-306"><a href="#cb14-306"></a></span>
<span id="cb14-309"><a href="#cb14-309"></a><span class="in">```{r}</span></span>
<span id="cb14-310"><a href="#cb14-310"></a><span class="co">#| warning: false</span></span>
<span id="cb14-311"><a href="#cb14-311"></a>tidy_pred_rank <span class="ot">&lt;-</span> tidy_pred_rank <span class="sc">%&gt;%</span> </span>
<span id="cb14-312"><a href="#cb14-312"></a>  <span class="fu">select</span>(<span class="st">"genus_species"</span>, <span class="st">"length_cm"</span>, <span class="st">"coral_reefs"</span>, <span class="st">"main_common_name"</span>, <span class="st">"reef_associated"</span>, <span class="st">"endemic"</span>, <span class="st">"y_hat"</span>)</span>
<span id="cb14-313"><a href="#cb14-313"></a><span class="fu">tab_df</span>(tidy_pred_rank[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,],</span>
<span id="cb14-314"><a href="#cb14-314"></a>       <span class="at">title =</span> <span class="st">"Tbl 9. Top 5 Most Vulnerable Unranked Fish in Hawaii"</span>,</span>
<span id="cb14-315"><a href="#cb14-315"></a>       <span class="at">col.header =</span> <span class="fu">c</span>(<span class="st">"Genus species"</span>, <span class="st">"Length (cm)"</span>, <span class="st">"Reef Association"</span>,</span>
<span id="cb14-316"><a href="#cb14-316"></a>                          <span class="st">"Common Name"</span>, <span class="st">"Reef Association"</span>, <span class="st">"Endemic"</span>,</span>
<span id="cb14-317"><a href="#cb14-317"></a>                          <span class="st">"Threatened"</span>))</span>
<span id="cb14-318"><a href="#cb14-318"></a><span class="in">```</span></span>
<span id="cb14-319"><a href="#cb14-319"></a></span>
<span id="cb14-320"><a href="#cb14-320"></a>The top five most vulnerable unranked species under this model are *Makaira mazara* (Indo-Pacific blue marlin), *Istiompax indica* (black marlin), *Echinorhinus cookei* (prickly shark), *Epinephelus lanceolatus* (giant grouper), and *Assurger anzac* (razorback scabbardfish) (Table 9.) *Makaira mazara* and *Istiompax indica* have probabilities of being threatened over 50%. I would recommend the IUCN evaluate these two species before others. However, there are limitations to this analysis and more research should be done before allocating resources to evaluate these species.</span>
<span id="cb14-321"><a href="#cb14-321"></a></span>
<span id="cb14-322"><a href="#cb14-322"></a><span class="fu">## Limitations &amp; Next Steps</span></span>
<span id="cb14-323"><a href="#cb14-323"></a></span>
<span id="cb14-324"><a href="#cb14-324"></a>As mentioned above, both the IUCN Red List data and the FishBase data have potential biases and don't evaluate all species. Additionally, not all listed species had every piece of information, and missing data were removed. With missing data removed, the sample became small. It is possible that endemism plays a bigger role in threat risk than illustrated here by the model. Points of concern with this model include disproportionate data in both the threat level and endemism, and high false negative rates in binary prediction. Future analyses could investigate other potential explanatory variables such as metrics measuring fishing pressure, life cycle characteristics, and range. Future analyses should also incorporate indigenous knowledge as Native People in Hawaiʻi know fish history around the islands and are frequently in the water for spearfishing and other recreation. Additionally, future analyses could expand the area of interest to all of the tropics.</span>
<span id="cb14-325"><a href="#cb14-325"></a></span>
<span id="cb14-326"><a href="#cb14-326"></a><span class="kw">&lt;h3&gt;</span>Reference<span class="kw">&lt;/h3&gt;</span></span>
<span id="cb14-327"><a href="#cb14-327"></a></span>
<span id="cb14-328"><a href="#cb14-328"></a><span class="sc">\[</span>1<span class="sc">\]</span> "IUCN," IUCN Red List of Threatened Species. Version 2022-1, 2022. https://www.iucnredlist.org/ (accessed Dec. 02, 2022).</span>
<span id="cb14-329"><a href="#cb14-329"></a></span>
<span id="cb14-330"><a href="#cb14-330"></a><span class="sc">\[</span>2<span class="sc">\]</span> B. J. Cardinale et al., "Biodiversity loss and its impact on humanity," Nature, vol. 486, no. 7401, Art. no. 7401, Jun. 2012, doi: 10.1038/nature11148. <span class="sc">\[</span>3<span class="sc">\]</span> M. J. Munstermann et al., "A global ecological signal of extinction risk in terrestrial vertebrates," Conserv. Biol., vol. 36, no. 3, p. e13852, 2022, doi: 10.1111/cobi.13852.</span>
<span id="cb14-331"><a href="#cb14-331"></a></span>
<span id="cb14-332"><a href="#cb14-332"></a><span class="sc">\[</span>4<span class="sc">\]</span> "IUCN," IUCN Red List of Threatened Species. Version 2022-1, 2015. www.iucnredlist.org</span>
<span id="cb14-333"><a href="#cb14-333"></a></span>
<span id="cb14-334"><a href="#cb14-334"></a><span class="sc">\[</span>5<span class="sc">\]</span> R. Froese and D. Pauly, "FishBase," 2022. www.fishbase.org</span>
<span id="cb14-335"><a href="#cb14-335"></a></span>
<span id="cb14-336"><a href="#cb14-336"></a><span class="sc">\[</span>6<span class="sc">\]</span> C. Boettiger, D. Temple Lang, and P. Wainwright, "rfishbase: exploring, manipulating and visualizing FishBase data from R.," J. Fish Biol., 2012, doi: https://doi.org/10.1111/j.1095-8649.2012.03464.x.</span>
<span id="cb14-337"><a href="#cb14-337"></a></span>
<span id="cb14-338"><a href="#cb14-338"></a><span class="sc">\[</span>7<span class="sc">\]</span> W. J. Ripple, C. Wolf, T. M. Newsome, M. Hoffmann, A. J. Wirsing, and D. J. McCauley, "Extinction risk is most acute for the world's largest and smallest vertebrates," Proc. Natl. Acad. Sci. U. S. A., vol. 114, no. 40, pp. 10678--10683, Oct. 2017, doi: 10.1073/pnas.1702078114.</span>
<span id="cb14-339"><a href="#cb14-339"></a></span>
<span id="cb14-340"><a href="#cb14-340"></a><span class="sc">\[</span>8<span class="sc">\]</span> K. D. Bahr, P. L. Jokiel, and K. S. Rodgers, "The 2014 coral bleaching and freshwater flood events in Kāneʻohe Bay, Hawaiʻi," PeerJ, vol. 3, p. e1136, Aug. 2015, doi: 10.7717/peerj.1136.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Elke Windschitl</div>   
    <div class="nav-footer-right">Made with Quarto</div>
  </div>
</footer>



</body></html>