{
  "hash": "7cdb4b2d1b59a104a8a7089faaf6fef1",
  "result": {
    "markdown": "---\ntitle: \"Learning Flourish to Visualize Ocean Depth Data\"\nauthor:\n  - name: Elke Windschitl\n    url: https://elkewind.github.io\n    affiliation: UCSB Bren School\n    affiliation-url: http://ucsb-meds.github.io\ndescription: \"A brief tutorial on how to use Flourish to visualize depth data\"\ndate: 2023-06-25\ncategories: [Data Visualization]\ncitation: \n  url: https://elkewind.github.io/posts/2023-06-25-flourish-ocean-depth\nimage: shark-depth.jpg\nformat: \n  html:\n    code-fold: show\ntoc: true\ndraft: false\n---\n\n\nDescription:  \n\nIn this post, I share how I used Flourish -- a data visualization platform -- to visualize ocean depth data in the Santa Barbara Channel. I used [ocean depth data](https://drive.google.com/drive/u/2/folders/1E8cjPiyKWWBDoiZ-ZVBw4odJk6u3pw-i) from the [kelpGeoMod](https://github.com/kelpGeoMod/kelpGeoMod-capstone-project) project data repository.\n\n### Something New\n\nI recently came upon a [tweet](https://twitter.com/CedScherer/status/1672602748099911681) about Flourish which is an online data visualization and storytelling platform. This was the first I'd heard of the platform, and I wanted to try it out as an alternative for other popular proprietary software such as Tableau. I pulled ocean depth data from my master's capstone project, Developing a Data Pipeline for Kelp Forest Modeling (also known as kelpGeoMod), and started to explore. Here I will share how I created the visualization below.\n\n\n```{=html}\n<div class=\"flourish-embed flourish-map\" data-src=\"visualisation/14244747\"><script src=\"https://public.flourish.studio/resources/embed.js\"></script></div>\n```\n\n\n### Getting the Data\n\nTo get data to visualize, I navigated back to my masters capstone project data repository and downloaded the [ocean depth data](https://drive.google.com/drive/u/2/folders/1E8cjPiyKWWBDoiZ-ZVBw4odJk6u3pw-i) in the Santa Barbara Channel. The original data source was the [ETOPO Global Relief Model 2022](https://www.ncei.noaa.gov/products/etopo-global-relief-model).\n\n![](images/data-repo.png){fig-alt=\"A Google Drive folder with ocean depth data.\" fig-align=\"center\"}\n\n### Getting Started in Flourish\n\nI then created a free account with Flourish. With the free version of my account, I have access to a limited set of features, while the full version offers additional functionalities. I then started exploring available features.\n\n![](images/sign-in.png){fig-align=\"center\"}\n\n![](images/start-viz.png){fig-align=\"center\"}\n\n![](images/viz-temps.png){fig-align=\"center\"}\n\nFlourish had numerous templates for visualizing data. I noticed, though, that it is not currently compatability with raster data, so I had to convert my raster data to vector data. This is not ideal, but it was quickly doable with this relatively small raster file.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary libraries\n\nlibrary(tidyverse)\nlibrary(terra)\nlibrary(sf)\n\n# Set a data directory\n#dir <- \"./data/\"\n\n# Load depth data\ndepth <- rast(file.path(dir, \"depth.tif\"))\n\n# Vectorize\ndepth_vect <- as.polygons(depth[[1]], \n                          dissolve = FALSE)\n\n# Convert to sf object\ndepth_sf <- st_as_sf(depth_vect) %>% \n  rename(\"depth\" = \"exportImage\") %>% # rename column name\n  filter(depth <= 0) %>% # filter for depths less than zero\n  mutate(depth = round(depth, 3)) # round depth values\n\n# Write to GeoJSON file\n# st_write(obj = depth_sf, \n#          file.path(dir, \"depth.geojson\", \n#          driver = \"GeoJSON\"))\n```\n:::\n\n\nI decided to choose the UK hex map template because I wanted to use try out the three-dimensional extrusion feature.\n\n![](images/picking-temp.png){fig-align=\"center\"}\n\n### Making the Map\n\nOnce you get started, to make the map you'll have to replace the template data with your own. Name your project, navigate to the data tab, then upload your own GeoJSON data.\n\n![](images/upload-data.png){fig-align=\"center\"}\n\nBe sure to select which columns go with which type of data. Flourish has helpful documentation hints denoted with question mark circles.\n\n![](images/data-selection.png){fig-align=\"center\"}\n\nWhen you're ready, swap back to the preview mode and start messing with your map's aesthetics.\n\n![](images/map-aesthetics.png){fig-align=\"center\"}\n\nI chose to edit aesthetics such as the projection, background color, padding, palette, legend, the popup shape, title, and footer. I also added a screenreader description. You can adjust these settings however you would like.\n\n![](images/basemap.png){fig-align=\"center\"}\n\n![](images/regions.png){fig-align=\"center\"}\n\n![](images/popup.png){fig-align=\"center\"}\n\n![](images/footer.png){fig-align=\"center\"}\n\nNow you should have an export-ready three-dimensional image of ocean depth in the Santa Barbara Channel! Export and enjoy Flourishing!\n\n![](images/export-ready.png){fig-align=\"center\"}\n\n\n```{=html}\n<div class=\"flourish-embed flourish-map\" data-src=\"visualisation/14244747\"><script src=\"https://public.flourish.studio/resources/embed.js\"></script></div>\n```\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}